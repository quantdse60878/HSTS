-- MySQL Script generated by MySQL Workbench
-- 10/04/15 12:50:28
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema hsts
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema hsts
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `hsts` DEFAULT CHARACTER SET utf8 ;
USE `hsts` ;

-- -----------------------------------------------------
-- Table `hsts`.`Role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Role` (
  `roleID` INT(11) NOT NULL AUTO_INCREMENT,
  `roleName` VARCHAR(45) NULL DEFAULT NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`roleID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Account` (
  `accountID` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(25) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `fullName` VARCHAR(45) NULL DEFAULT NULL,
  `roleID` INT(11) NOT NULL,
  `status` INT NULL,
  `dateOfBirth` DATE NULL,
  PRIMARY KEY (`accountID`),
  INDEX `fk_account_role_idx` (`roleID` ASC),
  CONSTRAINT `fk_account_role`
    FOREIGN KEY (`roleID`)
    REFERENCES `hsts`.`Role` (`roleID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Doctor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Doctor` (
  `doctorID` INT NOT NULL AUTO_INCREMENT,
  `accountID` INT NOT NULL,
  `major` VARCHAR(45) NULL,
  PRIMARY KEY (`doctorID`),
  INDEX `fk_doctor_account1_idx` (`accountID` ASC),
  CONSTRAINT `fk_doctor_account1`
    FOREIGN KEY (`accountID`)
    REFERENCES `hsts`.`Account` (`accountID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Food`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Food` (
  `foodID` INT(11) NOT NULL AUTO_INCREMENT,
  `foodName` VARCHAR(45) NULL DEFAULT NULL,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`foodID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Regimen`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Regimen` (
  `regimenID` INT(11) NOT NULL AUTO_INCREMENT,
  `illnessName` VARCHAR(45) NULL,
  PRIMARY KEY (`regimenID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Patient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Patient` (
  `patientID` INT NOT NULL AUTO_INCREMENT,
  `accountID` INT NOT NULL,
  `wristbandID` VARCHAR(45) NULL,
  `status` INT NULL,
  PRIMARY KEY (`patientID`),
  INDEX `fk_patient_account1_idx` (`accountID` ASC),
  CONSTRAINT `fk_patient_account1`
    FOREIGN KEY (`accountID`)
    REFERENCES `hsts`.`Account` (`accountID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`MedicalRecord`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`MedicalRecord` (
  `medicalRecordID` INT(11) NOT NULL AUTO_INCREMENT,
  `regimenID` INT NULL,
  `doctorID` INT NOT NULL,
  `patientID` INT NOT NULL,
  `startTime` DATE NOT NULL,
  `status` INT NULL,
  `medicalHistory` VARCHAR(200) NULL,
  `clinicalSymptoms` VARCHAR(200) NULL,
  PRIMARY KEY (`medicalRecordID`),
  INDEX `fk_medical_record_regimen_idx` (`regimenID` ASC),
  INDEX `fk_medical_record_Doctor1_idx` (`doctorID` ASC),
  INDEX `fk_medical_record_patient1_idx` (`patientID` ASC),
  CONSTRAINT `fk_medical_record_regimen`
    FOREIGN KEY (`regimenID`)
    REFERENCES `hsts`.`Regimen` (`regimenID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_medical_record_Doctor1`
    FOREIGN KEY (`doctorID`)
    REFERENCES `hsts`.`Doctor` (`doctorID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_medical_record_patient1`
    FOREIGN KEY (`patientID`)
    REFERENCES `hsts`.`Patient` (`patientID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Appointment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Appointment` (
  `appointmentID` INT NOT NULL AUTO_INCREMENT,
  `appointmentDateTime` DATETIME(1) NULL,
  `appointmentMessage` VARCHAR(200) NULL,
  `status` INT NULL,
  `medicalRecordID` INT NOT NULL,
  PRIMARY KEY (`appointmentID`),
  INDEX `fk_appointment_medicalrecord_idx` (`medicalRecordID` ASC),
  CONSTRAINT `fk_appointment_medicalrecord`
    FOREIGN KEY (`medicalRecordID`)
    REFERENCES `hsts`.`MedicalRecord` (`medicalRecordID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`MedicalRecordData`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`MedicalRecordData` (
  `medicalRecordDataID` INT(11) NOT NULL AUTO_INCREMENT,
  `height` INT(11) NULL DEFAULT NULL,
  `weight` INT(11) NULL DEFAULT NULL,
  `numberOfStep` INT(11) NULL DEFAULT NULL,
  `calories` INT(11) NULL DEFAULT NULL,
  `distance` FLOAT NULL,
  `dateCollectData` DATE NULL,
  `appointmentID` INT NOT NULL,
  `type` INT NULL,
  PRIMARY KEY (`medicalRecordDataID`),
  INDEX `fk_data_appointment_idx` (`appointmentID` ASC),
  CONSTRAINT `fk_data_appointment`
    FOREIGN KEY (`appointmentID`)
    REFERENCES `hsts`.`Appointment` (`appointmentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Medicine`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Medicine` (
  `medicineID` INT(11) NOT NULL AUTO_INCREMENT,
  `MedicineName` VARCHAR(45) NULL DEFAULT NULL,
  `Producer` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`medicineID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Treatment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Treatment` (
  `treatmentID` INT NOT NULL AUTO_INCREMENT,
  `fromDate` DATE NOT NULL,
  `toDate` DATE NOT NULL,
  `appointientID` INT NOT NULL,
  `advise` VARCHAR(400) NULL,
  PRIMARY KEY (`treatmentID`),
  INDEX `fk_treatement_appointment_idx` (`appointientID` ASC),
  CONSTRAINT `fk_treatement_appointment`
    FOREIGN KEY (`appointientID`)
    REFERENCES `hsts`.`Appointment` (`appointmentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`MedicineTime`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`MedicineTime` (
  `medicineTimeID` INT NOT NULL AUTO_INCREMENT,
  `timeUse` TIME NULL,
  `treatmentID` INT NULL,
  PRIMARY KEY (`medicineTimeID`),
  INDEX `fk_medicine_time_treatment_idx` (`treatmentID` ASC),
  CONSTRAINT `fk_medicine_time_treatment`
    FOREIGN KEY (`treatmentID`)
    REFERENCES `hsts`.`Treatment` (`treatmentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`MedicineTreatment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`MedicineTreatment` (
  `medicineTreatmentID` INT(11) NOT NULL AUTO_INCREMENT,
  `medicineID` INT(11) NULL DEFAULT NULL,
  `numberOfMedicine` FLOAT NULL DEFAULT NULL,
  `medicineTimeID` INT NULL,
  PRIMARY KEY (`medicineTreatmentID`),
  INDEX `fk_medicine_treatment_medicine_idx` (`medicineID` ASC),
  INDEX `fk_medicine_treatment_medicineTime_idx` (`medicineTimeID` ASC),
  CONSTRAINT `fk_medicine_treatment_medicine`
    FOREIGN KEY (`medicineID`)
    REFERENCES `hsts`.`Medicine` (`medicineID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_medicine_treatment_medicineTime`
    FOREIGN KEY (`medicineTimeID`)
    REFERENCES `hsts`.`MedicineTime` (`medicineTimeID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Phase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Phase` (
  `phaseID` INT(11) NOT NULL AUTO_INCREMENT,
  `fromdate` INT NULL DEFAULT NULL,
  `todate` INT NULL,
  `regimenID` INT(11) NOT NULL,
  PRIMARY KEY (`phaseID`),
  INDEX `fk_phase_regimen1_idx` (`regimenID` ASC),
  CONSTRAINT `fk_phase_regimen1`
    FOREIGN KEY (`regimenID`)
    REFERENCES `hsts`.`Regimen` (`regimenID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Practice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Practice` (
  `practiceID` INT(11) NOT NULL AUTO_INCREMENT,
  `practiceName` VARCHAR(45) NULL DEFAULT NULL,
  `intensity` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`practiceID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `hsts`.`Meal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Meal` (
  `mealID` INT NOT NULL AUTO_INCREMENT,
  `treatmentID` INT NULL,
  `timeStart` TIME NULL,
  PRIMARY KEY (`mealID`),
  INDEX `fk_meal_treatment_idx` (`treatmentID` ASC),
  CONSTRAINT `fk_meal_treatment`
    FOREIGN KEY (`treatmentID`)
    REFERENCES `hsts`.`Treatment` (`treatmentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`FoodTreatment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`FoodTreatment` (
  `foodTreatmentID` INT NOT NULL AUTO_INCREMENT,
  `foodID` INT NULL,
  `quantitative` VARCHAR(45) NULL,
  `mealID` INT NULL,
  PRIMARY KEY (`foodTreatmentID`),
  INDEX `fk_food_treatment_food_idx` (`foodID` ASC),
  INDEX `fk_food_treatment_meal_idx` (`mealID` ASC),
  CONSTRAINT `fk_food_treatment_food`
    FOREIGN KEY (`foodID`)
    REFERENCES `hsts`.`Food` (`foodID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_food_treatment_meal`
    FOREIGN KEY (`mealID`)
    REFERENCES `hsts`.`Meal` (`mealID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`PracticeTime`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`PracticeTime` (
  `practiceTimeID` INT NOT NULL AUTO_INCREMENT,
  `timeStart` TIME NULL,
  `treatmentID` INT NULL,
  PRIMARY KEY (`practiceTimeID`),
  INDEX `fk_practice_time_treatment_idx` (`treatmentID` ASC),
  CONSTRAINT `fk_practice_time_treatment`
    FOREIGN KEY (`treatmentID`)
    REFERENCES `hsts`.`Treatment` (`treatmentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`PracticeTreatment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`PracticeTreatment` (
  `practiceTreatmentID` INT NOT NULL AUTO_INCREMENT,
  `practiceID` INT NULL,
  `timeDuration` INT NULL,
  `practiceTimeID` INT NULL,
  PRIMARY KEY (`practiceTreatmentID`),
  INDEX `fk_practice_treatment_practice_idx` (`practiceID` ASC),
  INDEX `fk_practice_treatment_practiceTime_idx` (`practiceTimeID` ASC),
  CONSTRAINT `fk_practice_treatment_practice`
    FOREIGN KEY (`practiceID`)
    REFERENCES `hsts`.`Practice` (`practiceID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_practice_treatment_practiceTime`
    FOREIGN KEY (`practiceTimeID`)
    REFERENCES `hsts`.`PracticeTime` (`practiceTimeID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`Device`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`Device` (
  `deviceID` INT NOT NULL AUTO_INCREMENT,
  `brandName` VARCHAR(45) NULL,
  `brandUUID` VARCHAR(45) NULL,
  `numberOfStepUUID` VARCHAR(45) NULL,
  `positionNumberOfStep` INT NULL,
  PRIMARY KEY (`deviceID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`FoodPhase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`FoodPhase` (
  `foodPhaseID` INT NOT NULL AUTO_INCREMENT,
  `phaseID` INT NULL,
  `foodID` INT NULL,
  PRIMARY KEY (`foodPhaseID`),
  INDEX `fk_phase_food_idx` (`phaseID` ASC),
  INDEX `fk_phase_food_food_idx` (`foodID` ASC),
  CONSTRAINT `fk_phase_food_phase`
    FOREIGN KEY (`phaseID`)
    REFERENCES `hsts`.`Phase` (`phaseID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phase_food_food`
    FOREIGN KEY (`foodID`)
    REFERENCES `hsts`.`Food` (`foodID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`MedicinePhase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`MedicinePhase` (
  `medicinePhaseID` INT NOT NULL AUTO_INCREMENT,
  `phaseID` INT NULL,
  `medicineID` INT NULL,
  PRIMARY KEY (`medicinePhaseID`),
  INDEX `fk_medicine_phase_phase_idx` (`phaseID` ASC),
  INDEX `fk_medicine_phase_medicine_idx` (`medicineID` ASC),
  CONSTRAINT `fk_medicine_phase_phase`
    FOREIGN KEY (`phaseID`)
    REFERENCES `hsts`.`Phase` (`phaseID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_medicine_phase_medicine`
    FOREIGN KEY (`medicineID`)
    REFERENCES `hsts`.`Medicine` (`medicineID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hsts`.`PracticePhase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hsts`.`PracticePhase` (
  `practicePhaseID` INT NOT NULL AUTO_INCREMENT,
  `phaseID` INT NULL,
  `practiceID` INT NULL,
  PRIMARY KEY (`practicePhaseID`),
  INDEX `fk_practice_phase_phase_idx` (`phaseID` ASC),
  INDEX `fk_practice_phase_practice_idx` (`practiceID` ASC),
  CONSTRAINT `fk_practice_phase_phase`
    FOREIGN KEY (`phaseID`)
    REFERENCES `hsts`.`Phase` (`phaseID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_practice_phase_practice`
    FOREIGN KEY (`practiceID`)
    REFERENCES `hsts`.`Practice` (`practiceID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
